<!DOCTYPE html>
<html lang="en">
<head>
    <title>Redirecting...</title>
    <div id="head-placeholder"></div>
</head>
<body>
    <div id="body-start-placeholder"></div>
    
    <div class="container">
         <h1 class="form-title"><img src="https://ripx.ru/uploads/1psekx/6936e74a7ce92.png" alt="Logo" style="vertical-align: middle; margin-right: 15px; width: 50px;">q0wqexray</h1>
        <a id="redirectLink" class="btn" href="#" target="_blank">Click here to proceed</a>
        <p id="instructions">To continue, please click the button above.</p>
    </div>
    
    <div id="body-end-placeholder"></div>
    
    <script>
        // Fetch and insert shared head content
        fetch('../shared/head.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('head-placeholder').innerHTML = data;
            });
        
        // Fetch and insert shared body start content
        fetch('../shared/body-start.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('body-start-placeholder').innerHTML = data;
            });
        
        // Fetch and insert shared body end content
        fetch('../shared/body-end.html')
            .then(response => response.text())
            .then(data => {
                document.getElementById('body-end-placeholder').innerHTML = data;
            });
        
        document.addEventListener('DOMContentLoaded', function () {
          const currentURL = window.location.href;
          let redirectTo = decodeURIComponent(currentURL.split('redirect_to=')[1] || '');
          const language = navigator.language || navigator.userLanguage;
          const isRussian = language.startsWith('ru');

          const titleText = isRussian ? 'Продолжить' : 'Continue';
          const buttonText = isRussian ? 'Нажмите сюда, чтобы продолжить' : 'Click here to proceed';
          const instructionsText = isRussian
            ? 'Переадресация произойдёт автоматически в течение 3 секунд.\nЕсли этого не произошло, нажмите на кнопку выше.'
            : 'You will be redirected automatically within 3 seconds.\nIf nothing happens, please click the button above.';

          // document.getElementById('title').innerText = titleText;
          const linkEl = document.getElementById('redirectLink');
          linkEl.innerText = buttonText;
          linkEl.href = redirectTo;
          document.getElementById('instructions').innerText = instructionsText;

          if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.body.classList.add('dark');
          } else {
            document.body.classList.add('light');
          }

          let redirectTimer;

          if (redirectTo) {
            redirectTimer = setTimeout(() => {
              window.location.href = redirectTo;
            }, 3000);

            linkEl.addEventListener('click', function () {
              clearTimeout(redirectTimer);
            });
          } else {
            alert(isRussian ? 'Не указана ссылка для перенаправления.' : 'No redirect link specified.');
          }
        });
    </script>
</body>
</html>